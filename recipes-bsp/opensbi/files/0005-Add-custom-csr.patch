From f5b7e3709a1c4f86ff34d849b5aa6d5b06e4dcc4 Mon Sep 17 00:00:00 2001
From: lyctw <lyctw.ee@gmail.com>
Date: Fri, 19 Nov 2021 18:24:10 +0800
Subject: [PATCH] Add custom csr

---
 platform/andes/ae350/platform.h | 11 +++++++++++
 platform/andes/ae350/trigger.h  |  2 +-
 2 files changed, 12 insertions(+), 1 deletion(-)

diff --git a/platform/andes/ae350/platform.h b/platform/andes/ae350/platform.h
index 54f6e9d..8d3628d 100644
--- a/platform/andes/ae350/platform.h
+++ b/platform/andes/ae350/platform.h
@@ -90,6 +90,17 @@
  * AndeStar V5 supervisor mode CSRs
  **********************************/
 
+/* Debug/Trace Registers */                                                                                                        
+#define CSR_TSELECT   0x7a0                                                                                                        
+#define CSR_TDATA1    0x7a1                                                                                                        
+#define CSR_MCONTROL  0x7a1                                                                                                        
+#define CSR_TDATA2    0x7a2                                                                                                        
+#define CSR_TDATA3    0x7a3                                                                                                        
+#define CSR_TINFO     0x7a4                                                                                                        
+#define CSR_TCONTROL  0x7a5                                                                                                        
+#define CSR_MCONTEXT  0x7a8                                                                                                        
+#define CSR_SCONTEXT  0x7aa  
+
 /* Supervisor Trap Related */
 #define CSR_SLIE            0x9c4
 #define CSR_SLIP            0x9c5
diff --git a/platform/andes/ae350/trigger.h b/platform/andes/ae350/trigger.h
index 7f6ad1c..25e202e 100644
--- a/platform/andes/ae350/trigger.h
+++ b/platform/andes/ae350/trigger.h
@@ -82,7 +82,7 @@
 #define TRIGGER_SUPPORT(n)	(n < total_triggers)
 #define TRIGGER_SUPPORT_TYPE(type) ({		\
   uintptr_t __tmp;				\
-  uintptr_t __tinfo = csr_read(tinfo);		\
+  uintptr_t __tinfo = csr_read(CSR_TINFO);		\
   __tmp = (__tinfo & (1 << type));		\
   __tmp; })					\
 
-- 
2.25.1

